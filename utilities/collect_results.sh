#!/bin/bash
# Enter the execution directory where you have saved the log files from all iterations of
# leave-one-out cross-validation, generated by iterate.sh script. Then to collect the AUC-ROC
# values of the 6th iteration in a table format suitable to be copy-pasted to Google sheets, do:
# collect_results.sh 6


repeat=$1

for d in 3 4 5 6 7 8 9 10 20 30 40 50 60 70 80 90 100;
do
  grep "model =" results_${d}D-UMAP_repeat${repeat}.log | awk '{print $7}';
done | awk '{if(NR%18==0){printf "%s\n", $1} else {printf "%s\t", $1}}' > table.txt

awk 'BEGIN {
    max_x =0;
    max_y =0;
}

{
    max_y++;
    for( i=1; i<=NF; i++ )
    {
        if (i>max_x) max_x=i;
        A[i,max_y] = $i;
    }
}

END {
    for ( x=1; x<=max_x; x++ )
    {
        for ( y=1; y<=max_y; y++ )
        {
            if ( (x,y) in A ) printf "%s",A[x,y];
            if ( y!=max_y ) printf "\t";
        }
        printf "\n";
    }
}
' table.txt